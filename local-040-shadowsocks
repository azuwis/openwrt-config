push_shadowsocks() {
    local version git_version ipk_version
    version="2.4.6"
    v_git="98cf545"
    v_ipk="1"
    download_push "http://jaist.dl.sourceforge.net/project/openwrt-dist/shadowsocks-libev/${version}-${v_git}/${arch}/shadowsocks-libev-spec_${version}-${v_ipk}_${arch}.ipk" /tmp/shadowsocks-libev-spec.ipk shadowsocks-libev-spec
}
push_shadowsocks

push_chinadns() {
    local version git_version ipk_version
    version="1.3.2"
    v_git="d3e75dd"
    v_ipk="3"
    download_push "http://jaist.dl.sourceforge.net/project/openwrt-dist/chinadns/${version}-${v_git}/ChinaDNS_${version}-${v_ipk}_${arch}.ipk" /tmp/ChinaDNS.ipk ChinaDNS
}
push_chinadns

chnroute() {
    awk -F\| '/CN\|ipv4/ { printf("%s/%d\n", $4, 32-log($5)/log(2)) }'
}
if [ ! -e files/chinadns_chnroute.txt ]; then
    if [ ! -e files/delegated-apnic-latest ]; then
        download http://ftp.apnic.net/apnic/stats/apnic/delegated-apnic-latest
    fi
    chnroute < files/delegated-apnic-latest > files/chinadns_chnroute.txt
    echo '64.62.200.2/32' >> files/chinadns_chnroute.txt
fi
push files/chinadns_chnroute.txt /tmp/chinadns_chnroute.txt >/dev/null

download_push "https://downloads.openwrt.org/barrier_breaker/14.07/${arch}/generic/packages/oldpackages/pdnsd_1.2.9a-par-a8e46ccba7b0fa2230d6c42ab6dcd92926f6c21d_${arch}.ipk" /tmp/pdnsd.ipk pdnsd

# push_dnsproxy() {
#     local version
#     version='0.4.6.1-1'
#     download_push "https://github.com/wongsyrone/openwrt-Pcap_DNSProxy/raw/prebuilt-ipks/chaos_calmer/15.05.1/x86/generic/pcap-dnsproxy_${version}_${arch}.ipk" /tmp/pcap-dnsproxy.ipk pcap-dnsproxy
# }
# push_dnsproxy
